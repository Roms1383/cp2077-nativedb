@if (data$ | async; as data) {
  <ndb-title-bar [title]="data.object.name" [node]="data.object">
    <mat-icon class="badge" [attr.data-scope]="data.scope" svgIcon="scope" [title]="data.scope"></mat-icon>
    @if (data.isAbstract) {
      <mat-icon class="badge" svgIcon="abstract" title="abstract"></mat-icon>
    }<!--
      @if (data.isFinal) {
        <mat-icon class="badge" svgIcon="final" title="final"></mat-icon>
      }-->
    @if (data.object.origin === nativeOrigin) {
      <mat-icon class="badge" svgIcon="native" title="native"></mat-icon>
    } @else if (data.object.origin === importOnlyOrigin) {
      <mat-icon class="badge" svgIcon="importonly" title="importonly"></mat-icon>
    }
    @if (!data.object.isStruct) {
      <mat-icon class="badge-class" svgIcon="class" title="class"></mat-icon>
    } @else {
      <mat-icon class="badge-struct" svgIcon="struct" title="struct"></mat-icon>
    }
  </ndb-title-bar>

  <cdk-accordion multi="true">
    @if (data.showParents) {
      <ndb-accordion-item [expanded]="data.parents.length > 0"
                          [disabled]="data.parents.length === 0">
        <div header class="header">
          <h3>Inherits</h3>
          <mat-chip [highlighted]="data.parents.length > 0"
                    [disabled]="data.parents.length === 0"
                    [disableRipple]="true">{{data.parents.length}}</mat-chip>
        </div>

        @for (parent of data.parents; track parent.id) {
          <div class="inheritance stx">
            <div class="align" [style.width]="data.align"></div>
            <mat-icon>subdirectory_arrow_right</mat-icon>
            <type-span [node]="parent"></type-span>
          </div>
        }
      </ndb-accordion-item>
    }

    @if (data.showChildren) {
      <ndb-accordion-item [expanded]="data.children.length > 0"
                         [disabled]="data.children.length === 0">
        <div header class="header">
          <h3>Inherited by</h3>
          <mat-chip [highlighted]="data.children.length > 0"
                    [disabled]="data.children.length === 0"
                    [disableRipple]="true">{{data.children.length}}</mat-chip>
        </div>

        @for (child of data.children; track child.id) {
          <div class="inheritance stx">
            <div class="align" [style.width]="data.align"></div>
            <mat-icon>subdirectory_arrow_left</mat-icon>
            <type-span [node]="child"></type-span>
          </div>
        }
      </ndb-accordion-item>
    }

    @if (data.showProperties) {
      <ndb-accordion-item [expanded]="data.properties.length > 0"
                         [disabled]="data.properties.length === 0">
        <div header class="header">
          <h3>Properties</h3>
          <mat-chip [highlighted]="data.properties.length > 0"
                    [disabled]="data.properties.length === 0"
                    [disableRipple]="true">{{data.properties.length}}</mat-chip>
        </div>

        @for (prop of data.properties; track prop.name; let i = $index) {
          <property-span [node]="prop" [badges]="data.badges"></property-span>
          @if (data.isMobile && i + 1 < data.properties.length) {
            <mat-divider></mat-divider>
          }
        }
      </ndb-accordion-item>
    }

    @if (data.showFunctions) {
      <ndb-accordion-item [expanded]="data.functions.length > 0"
                         [disabled]="data.functions.length === 0">
        <div header class="header">
          <h3>Functions</h3>
          <mat-chip [highlighted]="data.functions.length > 0"
                    [disabled]="data.functions.length === 0"
                    [disableRipple]="true">{{data.functions.length}}</mat-chip>
        </div>

        @for (func of data.functions; track func.id; let i = $index) {
          <function-span [node]="func" [canCopy]="true" [memberOf]="data.object" [badges]="data.badges"></function-span>
          @if (data.isMobile && i + 1 < data.functions.length) {
            <mat-divider></mat-divider>
          }
        }
      </ndb-accordion-item>
    }
  </cdk-accordion>
} @else {
  <h1 class="stx stx-type">Loading...</h1>
  <div class="prototype">
    <span class="skt-circle skt-scope"></span>
    @if (kind === classKind) {
      <span class="skt-circle skt-class"></span>
    } @else if (kind === structKind) {
      <span class="skt-circle skt-struct"></span>
    }
  </div>

  <div class="skt-accordion-item">
    <div class="skt-header">
      <div class="skt-button"></div>
      <h3 class="skt-title">Inherits</h3>
      <div class="skt-chip"></div>
    </div>

    <div class="skt-divider"></div>
  </div>

  <div class="skt-accordion-item">
    <div class="skt-header">
      <div class="skt-button"></div>
      <h3 class="skt-title">Inherited by</h3>
      <div class="skt-chip"></div>
    </div>

    <div class="skt-divider"></div>
  </div>

  <div class="skt-accordion-item">
    <div class="skt-header">
      <div class="skt-button"></div>
      <h3 class="skt-title">Properties</h3>
      <div class="skt-chip"></div>
    </div>

    <div class="skt-divider"></div>
  </div>

  <div class="skt-accordion-item">
    <div class="skt-header">
      <div class="skt-button"></div>
      <h3 class="skt-title">Functions</h3>
      <div class="skt-chip"></div>
    </div>

    <div class="skt-divider"></div>
  </div>
}
